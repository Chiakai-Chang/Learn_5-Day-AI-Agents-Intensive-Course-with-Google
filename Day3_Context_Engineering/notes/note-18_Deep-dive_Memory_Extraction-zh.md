### 🎙️ 第 18 頁：Deep-dive_Memory_Extraction

#### 【本頁重點摘要】
*   記憶提取的目標是從對話中篩選出「有意義」的資訊，將其轉化為記憶。
*   「有意義」的標準完全取決於代理人的具體用途，需要客製化定義。
*   主要有三種提取方法：基於結構化 Schema、基於自然語言主題定義，以及透過範例學習的 Few-shot Prompting。

---

#### 【逐字講稿】

(開場白)
好，我們剛剛看完了記憶生成的整體流程，現在，我們要深入這個流程的第一個關鍵步驟：「提取 (Extraction)」。這可以說是最神奇的一步。每天，代理人跟用戶之間有無數的對話，有問候、有閒聊、有廢話。如果我們把所有東西都記下來，那記憶就只是一堆無用的噪音。

> 所以，提取的核心問題就是這頁投影片上的標題：在這大量的對話中，到底哪些資訊，才真正「有意義」，值得被我們轉化為一條永久的記憶？

這不是簡單的摘要，而是一個目標明確、高度智慧的**過濾過程**，目的是從噪音中分離出有價值的訊號。

##### ① 首先，我們必須定義什麼是「有意義」
投影片上提到，**「有意義」完全由代理人的使用場景決定**。這句話非常關鍵。一個通用的標準是不存在的。

*   想像一個**電商的客服代理人**，它需要記住的「有意義」資訊可能是：用戶的訂單編號、遇到的技術問題、退貨的理由。
*   但如果是一個**個人健康教練代理人**，它需要記住的就完全不同了，可能是：用戶的長期健身目標、最近的情緒狀態、飲食偏好。

你看，同樣是「記憶」，但對「有意義」的定義天差地遠。因此，客製化代理人需要記住的內容，是打造一個真正有效代理人的第一步。

##### ② 那麼，系統是如何知道要提取什麼的？答案是：主題定義 (Topic Definitions)
記憶管理器的 LLM 之所以能聰明地提取資訊，是因為我們在它的系統提示 (System Prompt) 中，給了它一套非常清晰的「遊戲規則」，也就是所謂的**主題定義**。這些定義就像是給 LLM 的一副特殊眼鏡，讓它在閱讀對話時，只看得到我們感興趣的特定主題。

##### ③ 實現主題定義的三種主要方法
投影片列出了三種主流的技術，讓我們一一拆解：

*   **第一種：基於 Schema (Schema-based)**
    這就像是給 LLM 一張預先設計好的 JSON 格式的「表格」。我們命令它：「從對話中找出能填進這張表格的資訊。」例如，表格裡有 `{"seat_preference": "..."}` 這個欄位，LLM 就會去對話中尋找用戶關於座位偏好的描述，然後把「靠窗」或「走道」填進去。這非常適合提取結構化的資料。

*   **第二種：自然語言主題 (Natural Language Topics)**
    這是最直接的方法。我們直接用白話文告訴 LLM 要找什麼。例如，給它一個主題描述：「尋找用戶對於咖啡店體驗的具體回饋，包含對飲料、食物、氛圍、服務速度或清潔度的看法。」LLM 就會根據這段描述去抓取相關內容。

*   **第三種，也是非常強大的一種：Few-shot Prompting**
    這個策略的核心是「身教重於言教」。我們不只是告訴 LLM 要做什麼，而是直接**做給它看**。我們在提示中提供幾個「輸入對話」與「理想輸出記憶」的範例。
    > 例如，我們給它看一段對話：『用戶說：今天的手沖咖啡有點溫掉了，而且音樂太大聲，我幾乎聽不到朋友說話。』然後我們告訴它，這段話應該被提取成兩條記憶：『事實：用戶回報手沖咖啡是溫的』和『事實：用戶覺得店裡音樂太大聲』。

透過這些範例，LLM 能自己學會提取的模式與標準，這對於那些很難用簡單規則描述的、更細微的主題特別有效。

---

#### 【講者提示 & 轉場】
*   **節奏提醒**：講完這三種方法後，可以稍微停頓。這三點是本頁的技術核心，確保聽眾能理解從「給表格」、「給描述」到「給範例」的層次遞進。
*   **補充說明**：可以補充一點，大部分的記憶平台都會內建一些通用主題（例如記住用戶偏好、關鍵事實），但真正的威力來自於開發者能夠像這樣，為自己的業務場景定義專屬的、客製化的主題。
*   **轉場橋樑 (Bridge)**：
    > 好了，現在我們透過這些方法，成功從對話中提取出了一批新的、有價值的資訊。但工作還沒結束。我們不能 просто 把這些新資訊丟進記憶庫裡。如果用戶說了跟以前矛盾的話怎麼辦？如果他重複提了同一件事怎麼辦？這就引出了我們記憶生成的下一個、也是更複雜的階段：「合併與整理」，也就是 **Consolidation**。下一頁，我們就來看看系統如何扮演一個聰明的編輯，保持記憶庫的整潔與準確。