```markdown
### 🎙️ 第 16 頁：Act_Managing_System_Health_and_Risk

#### 【本頁重點摘要】
*   「執行 (Act)」階段是關於即時的介入與控制，如同系統的自動化反應機制。
*   此階段的營運槓桿分為兩大類：管理系統健康（效能、成本、規模）與管理風險（安全應變）。
*   系統健康管理著重於透過解耦、水平擴展與非同步處理來實現規模化，並在速度、可靠性與成本之間取得平衡。
*   風險管理則依循一套標準劇本：立即「圍堵 (Contain)」、接著「分類 (Triage)」、最後「解決 (Resolve)」。

---

#### 【逐字講稿】

(開場白)
各位，我們剛剛談完了「觀察 (Observe)」，但如果觀察到的數據，最終只是變成儀表板上昂貴的數字，那一切就失去了意義。這就帶我們進入了「執行 (Act)」階段——也就是我們根據觀察到的情況，實際拉下控制桿，來即時管理我們 AI 代理的效能、成本與安全。

> 請記住，「執行 (Act)」是系統的**自動化反射**，專為維持即時穩定而設計。這與我們稍後會談到的「演化 (Evolve)」不同，「演化」是從根本上學習與改進的戰略過程。

因為代理程式具有自主性，我們不可能預先寫好所有情境的腳本。因此，我們必須建立強大的機制，在生產環境中影響它的行為。這些機制主要分為兩大類。

##### ① 管理系統健康：在效能、成本與規模之間跳舞
首先，是管理系統的整體健康。傳統微服務的工作負載是可預測的，但 AI 代理是動態且有狀態的，這帶來了獨特的挑戰。

*   **為規模而設計**：根本策略是將代理的**邏輯與其狀態分離**。我們將代理設計成無狀態的容器化服務，這樣像 Cloud Run 或 Vertex AI Agent Engine 這類的平台就能自動進行水平擴展。對於需要長時間運行的任務，我們可以透過像 Pub/Sub 這樣的事件驅動模式來非同步處理，保持代理的回應速度。而記憶體等狀態，則必須外部化，可以選擇使用 Vertex AI Agent Engine 內建的持久化服務，或是整合像 AlloyDB、Cloud SQL 這類的資料庫。

*   **平衡相互競爭的目標**：擴展永遠是在三個目標之間取得平衡的藝術：
    *   **速度**：透過平行化設計、積極快取結果，以及為簡單任務選用更小、更快的模型來保持低延遲。
    *   **可靠性**：當外部呼叫失敗時，必須能自動重試，最好是採用**指數退避 (exponential backoff)** 策略，給予服務恢復的時間。這也意味著我們的工具需要設計成「可安全重試的」(idempotent)，以避免像重複扣款這樣的錯誤。
    *   **成本**：透過縮短提示詞、為簡單任務使用更便宜的模型，以及批次處理請求來控制開銷。

##### ② 管理風險：你的資安應變劇本
第二個重要的控制桿，是管理風險。因為代理程式可以自主行動，當威脅發生時，我們需要一套劇本來快速圍堵損害。這個流程包含三個步驟：圍堵、分類、解決。

1.  **圍堵 (Contain)**：第一步是立即控制損害。我們的首要任務是停止傷害，最常見的方法是啟動「**斷路器 (circuit breaker)**」——例如，透過一個功能開關，立即禁用受影響的工具。
2.  **分類 (Triage)**：在威脅被控制住後，可疑的請求會被轉送到一個「**真人介入 (Human-in-the-Loop)**」的審查佇列中。由人工專家來調查這次攻擊的範圍與影響。
3.  **解決 (Resolve)**：最後，團隊會開發一個永久性的補丁——可能是一個更新的輸入過濾器，或是一段更安全的系統提示詞——然後透過我們前面建立的 **CI/CD 自動化管線**進行部署，確保這個漏洞在經過完整測試後，被徹底封堵。

---

#### 【講者提示 & 轉場】
*   **節奏提醒**：講完這兩大類管理機制後，可以稍微停頓一下，讓聽眾消化「系統健康」和「風險管理」這兩個核心概念。
*   **補充案例**：可以強調，這些聽起來複雜的機制，例如斷路器、指數退避，都已經是成熟軟體工程的最佳實踐，現在只是將它們應用於管理 AI 代理的獨特行為上。
*   **轉場橋樑 (Bridge)**：
    > 好的，我們學會了如何像一個系統管理員一樣，即時處理代理程式在線上發生的各種狀況。但僅僅是「反應」還不夠。我們如何從這些事件中學習，從根本上改進我們的代理，讓同樣的問題不再發生？這就帶我們進入了 AgentOps 循環的最後一個、也是最關鍵的環節：「演化 (Evolve)」。
```