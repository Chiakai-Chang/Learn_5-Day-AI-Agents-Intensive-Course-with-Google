### 🎙️ 第 05 頁：Evaluation in Practice: Black Box vs. Glass Box Views

#### 【本頁重點摘要】
*   **黑箱 (Black Box) 評估**：從外部視角開始，只看最終結果，判斷「任務是否成功」。
*   **白箱 (Glass Box) 評估**：當任務失敗時，深入內部，分析代理人的完整「決策軌跡」，找出「為什麼失敗」。
*   這是一個由外而內的兩步驟流程：先評估結果，再診斷過程。

---

#### 【逐字講稿】

(開場白)
好，我們已經建立了「由外而內」的策略框架。現在，讓我們看看這個策略在實務中是如何運作的。它主要分為兩個核心視角：第一個是「黑箱」視角，第二個則是「白箱」視角。

##### ① 「由外而內」的起點：黑箱評估 (The Black Box)

首先，我們從黑箱開始。這代表我們先不關心代理人內部是怎麼想的、過程有多複雜。我們只問一個最根本、也最重要的問題：「這個代理人，有沒有有效地完成使用者的目標？」

> 在我們分析任何內部思考或工具調用之前，我們必須先評估最終的成果。對於一個寫程式的代理人，這可能意味著「它產生的 PR (Pull Request) 有沒有被接受？」；對於一個金融交易代理人，則是「資料庫交易是否成功？」

這就是我們的第一道品質關卡。我們會看幾個關鍵指標：
*   **任務成功率**：這是一個直接的、二元的分數。問題解決了，還是沒解決？
*   **使用者滿意度**：使用者最直接的感受是什麼？他們是給了「讚」，還是「倒讚」？或是給了多高的客戶滿意度分數 (CSAT)？
*   **整體品質**：如果任務是量化的，例如「總結這十篇文章」，那它是否真的總結了全部十篇？內容是否準確、完整？

如果代理人在這個階段拿到滿分，那我們的評估工作可能就到此為止了。但現實是，當結果不完美、任務被中途放棄，或出現奇怪的答案時，「黑箱」評估只告訴我們「**什麼**」錯了。接下來，我們就需要打開箱子，看看裡面到底發生了什麼事。

##### ② 深入問題核心：白箱評估 (The Glass Box)

一旦我們在黑箱評估中發現了問題，我們就切換到「白箱」視角。這個階段的目標非常明確：「**為什麼**代理人會成功或失敗？」

> 透過白箱分析，我們的診斷能力將從「最終答案是錯的」，提升到「最終答案是錯的，**因為**它在第三步錯誤解讀了 API 回傳的錯誤碼」。這就是我們追求的深度洞察力。

為了做到這一點，我們會系統性地拆解代理人的整個執行軌跡 (Trajectory)，檢查每一個環節：
*   **LLM 的規劃 (也就是「思考」)**：我們先檢查大腦。大型語言模型本身是不是產生了幻覺、陷入了重複的迴圈，或是被無關的上下文污染了？
*   **工具的使用**：代理人就像一個工匠，它的工具用得好不好很關鍵。它有沒有選錯工具？或者，有沒有在該用的時候不用？甚至，它有沒有自己「幻想」出一個根本不存在的工具或參數？
*   **工具回傳結果的解讀 (也就是「觀察」)**：工具執行成功後，代理人看懂結果了嗎？一個非常常見的失敗案例是，API 回傳了「404 找不到頁面」的錯誤，但代理人卻沒意識到，還當作一切順利地繼續往下執行。
*   **RAG 的表現**：如果代理人需要從知識庫中檢索資料，那它找到的資訊相關嗎？是不是過時或不正確的？還是說，它明明找到了正確資料，卻選擇忽略，然後自己瞎掰一個答案？
*   **軌跡的效率與穩健性**：最後，我們評估整個過程本身。一個本該三步就能完成的任務，代理人卻繞了二十五步才做完，就算最終答案對了，這也是一個低品質、高成本的代理人。

---

#### 【講者提示 & 轉場】
*   **節奏提醒**：在解釋「白箱」的各個評估組件時，可以放慢速度，用偵探辦案的比喻——我們正在一步步追蹤線索，找出導致任務失敗的根本原因。
*   **補充案例**：你可以補充一個實際操作的例子：「在實務中，開發者通常會使用一個『追蹤』(Trace) 介面。這個介面會像地圖一樣，視覺化地畫出代理人的每一步路徑、它調用了哪個工具、傳了什麼參數，讓我們一眼就能看出它在哪個路口走錯了路。」
*   **轉場橋樑 (Bridge)**：
    > 好的，我們現在知道了評估「什麼」以及「如何」深入分析的方法。但下一個問題是，執行這些評估的「裁判」到底是誰？是人類，還是機器？下一頁，我們將來認識這些評估者。